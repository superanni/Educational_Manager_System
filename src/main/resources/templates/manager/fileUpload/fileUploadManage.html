<!DOCTYPE html><html lang="en"><head>	<meta charset="UTF-8">	<title>Title</title>		<title>上传文件管理</title>	<script>		new Vue({			router:router,			el:"#showfileUploadInfo",			//在页面加载的时候就被created()添加了数据			data:{				fileTitle:'',				currentPage:1,				total:'',				totalPage:'',				list:[]			},			/*方法执行前*/			created(){				this.getAllList();			},			methods:{				/*查询所有文件信息*/				getAllList(){					this.$http.get("uploadFile/uploadfileCurrentList/"+this.currentPage).then(result => {						this.common(result);					})				},				/*分页处理*/				changePage(data){					if(data === "pre"){						this.currentPage-=1;					}else if(data === "next"){						this.currentPage+=1;					}					if(this.fileTitle.trim() === '')						this.getAllList();					else						this.showfileUploadInfo(this.currentPage);				},								//根据选择框的页数查询数据				selectPage(){					this.currentPage=$("[name='currentPage']").val();					this.showfileUploadInfo(this.currentPage);				},								/*根据文件标题查询文件信息*/				showfileUploadInfo(currentPage){					this.fileTitle=$("[name='fileTitle']").val();					this.$http.post("uploadFile/listUploadFileLike",{fileTitle:this.fileTitle , currentPage:currentPage}).then(result => {						this.common(result);					})				},								//更新加载页面				update(){					$('#content-change-main').load("fileUpload/saveOrUpdate/saveOrUpdateFileUpload.html",function(){});				},				//删除文件信息				del(id){					this.$http.delete("uploadFile/deleteUploadFile/"+id).then(result => {						var result=result.body;						if (result==true){							toastr.success("删除成功");							this.getAllList();						} else{							toastr.warning("删除失败");						}					})				},				//通用的数据绑定				common(result){					var result=result.body;					if(result.status === 0){						this.list = result.list;						this.total = result.total;						this.currentPage = result.currentPage;						this.totalPage = result.totalPage;					}else{						toastr.error("获取数据失败");					}				}			}		})	</script></head><body><div id="showfileUploadInfo"><div class="page-header">	<!--查询 上传 文件管理-->	<div class="navbar-menu-wrapper d-flex align-items-stretch">		<form action="#" method="post" class="form-inline">	<div class="row alert alert-info" style="margin:0px; padding:5px;">		<div class="form-group">			<input type="text" class="form-control" name="fileTitle"  placeholder="文件标题">		</div>		<button type="button" @click="showfileUploadInfo(1)" class="btn btn-gradient-info btn-sm">查询</button>		<router-link tag="button" style="margin-left: 40px" to="/" name="save" class="btn btn-gradient-primary btn-sm">资料上传</router-link>	</div></form>	</div></div><div align="center">	<div class="alert alert-info"	     style="margin: 0px; padding: 5px; width: 100%;">		<button type="button" class="close" data-dismiss="alert">			<span aria-hidden="true">&times;</span>		</button>		<div class="row">			<div class="col-12 grid-margin">				<div class="card">					<div class="card-body">						<p class="card-description">							文件上传/上传文件管理 <code>lessonManage</code>						</p>						<div class="table-responsive">                      <form name="fileFrom">							<table class="table">								<thead>								<tr align="center">									<th>										<input type="checkbox" id="theadInp" />									</th>									<th>编号</th>									<th>标题</th>									<th>上传人</th>									<th>上传时间</th>									<th>修改</th>									<th>删除</th>								</tr>								</thead>								<tbody>								<tr v-for="item in list" align="center">									<td><input type="checkbox" /></td>									<td>{{item.fileId}}</td>									<td><i class="mdi mdi-arrow-down text-info">{{item.fileTitle}}</i></td>									<td class="text-danger">{{item.staffInfo.staffName}}</td>									<td><p property="fileTime" format="{0,date,yyyy-MM-dd}" title="上传时间"/> {{dateFormat(item.fileTime)}}</p></td>									<td @click="update()"><router-link tag="button" name="update" class="btn btn-gradient-warning btn-sm" :to="{path: 'update', query: { classroomId: item.classroomId }}">修改</router-link></td>									<td><button type="button" class="btn btn-gradient-danger btn-sm" @click="del(item.fileId)">删除</button></td>								</tr>								<tr>									<td colspan="7" align="center">							          <span style="margin-left: 25px" class="card-description">                                        <!--第 <code>{{currentPage}}</code>页-->                                        第&nbsp;                                        <select name="currentPage" v-model="currentPage" @change="selectPage()">                                            <option v-for="item in totalPage" :value="item">{{item}}</option>                                        </select>                                        &nbsp;&nbsp;页                                    </span>										<button type="button" v-if="currentPage>1" style="margin-left: 25px" @click="changePage('pre')" class="btn btn-gradient-success btn-sm">上一页</button>										<button type="button" v-if="currentPage<totalPage" style="margin-left: 25px" @click="changePage('next')" class="btn btn-gradient-success btn-sm">下一页</button>									</td>									<td>										<button type="button" style="margin-left: 30px" class="btn btn-gradient-info btn-sm">更多</button>									</td>								</tr>								</tbody>							</table>                      </form>						</div>					</div>				</div>			</div>		</div>	</div></div></div><script>	$(function(){		$("[name='save']").on('click',function(){			$('#content-change-main').load("fileUpload/saveOrUpdate/uploadFile.html",function(){});		});	});</script><script>	//实现全选复选	$(function() {		//实现全选反选		$("#theadInp").on('click', function() {			$("tbody input:checkbox").prop("checked", $(this).prop('checked'));		})		$("tbody input:checkbox").on('click', function() {			//当选中的长度等于checkbox的长度的时候,就让控制全选反选的checkbox设置为选中,否则就为未选中			if($("tbody input:checkbox").length === $("tbody input:checked").length) {				$("#theadInp").prop("checked", true);			} else {				$("#theadInp").prop("checked", false);			}		})	})</script></body></html>